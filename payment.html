<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pago de reserva</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato" />
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/js-datepicker/dist/datepicker.min.css" />
</head>

<body>
    <div class="fomrContainerPayment" style="display: none;">
        <div class="welcome">
            <h1 class="w-title-p">Realizar reserva de un inmueble</h1>
            <h1 class="w-title-s">¡Un gusto saludarte, Carolina!</h1>
            <p class="w-description">A continuación, podrás realizar el pago para garantizar la reserva de tu nuevo hogar.
            </p>
        </div>
        <div class="client-info card" style="display: none;">
            <p class="c-wrapper">
                <img src=" ./image/contact.svg " alt="contact ">
                <span class="c-name ">Carolina Ramírez Fernández</span>
            </p>
            <p class=" c-contact ">
                <span>Contacto</span>
                <span class=" number ">8788-5432</span>
            </p>
            <p class=" c-wrapper ">
                <span class=" c-email ">scampos@gmail.com</span>
                <img src=" ./image/pincelEmail.svg " alt="pincelEmail ">
            </p>
            <p class=" c-wrapper">
                <span class="c-is-email ">¿Es este su correo?</span>
                <span class=" c-wrapper checkYes ">
                    <img src="./image/check.svg" alt="checkYes">
                    <span class="c-is-email c-yes">Si</span>
                </span>
            </p>
        </div>
        <div class="container-payments" style="display: none;">
            <div class="payment-amount card ">
                <div class="p-header">
                    <p class="p-title">Pago de reserva:</p>
                </div>
                <div class="p-amount">
                    <p>Monto</p>
                    <h2>$1,500.00</h2>
                    <p class="barra"></p>

                </div>

                <div class="macro-condo-info">
                    <h1 class="m-title">Condominio Monte Alto</h1>
                    <div class="container-condo">
                        <div class="condo-info">
                            <p class="c-wrapper">
                                <img src=" ./image/quota.svg " alt="quota " width="16" height="13">
                                <span class="info">Cuota Nº 123.</span>
                            </p>
                            <p class="c-wrapper">
                                <img src="./image/house.svg" alt="house " width="16" height="13">
                                <span class="info">Unidad A 1-1.</span>
                            </p>
                            <p class="c-wrapper">
                                <img src="./image/parking.svg" alt="parking " width="16" height="13">
                                <span class="info">2 espacios de parqueo.</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-credit-payment card" style="display: none;">
                <div class="f-header">
                    <p class="c-wrapper">
                        <img src="./image/credit-cardIcon.svg" alt="cardIcon ">
                        <span class="f-title">Detalles de pago</span>
                    </p>
                </div>


                <div class="credit-card">
                    <div class="type-card-img">
                        <img id="typeCardLabel" src="./image/masterCard.svg" />
                    </div>
                    <div class="data-group-card">
                        <div class="flexLabel">
                            <label id="nameCardLabel" class="tittle-card">Nombre</label>
                            <label id="nameCardLabel2" class="data-card"> Kevin marquez</label>
                        </div>
                        <div class="flexLabel">
                            <label id="numberCardLabel" class="tittle-card">Número de tarjeta</label>
                            <label id="numberCardLabel2" class="data-card"> 1234 6798 0987 5432 </label>
                        </div>
                        <div style="display: flex">
                            <div class="flexLabel">
                                <label id="expirationCardLabel" class="tittle-card">Expiración</label>
                                <label id="expirationCardLabel2" class="data-card">
                                    10/21
                                </label>
                            </div>
                            <div class="flexLabel" style="margin-left: 76px">
                                <label id="cvvCardLabel" class="tittle-card">CVV</label>
                                <label id="cvvCardLabel2" class="data-card">125 </label>
                            </div>
                        </div>
                    </div>
                </div>

                <form action="">
                    <div class="inputContainer">
                        <input type="text" class="formInput nameCredit" placeholder="Nombre en la tarjeta" />
                    </div>
                    <div class="inputContainer">
                        <img src="./image/numberCredit.svg" alt="formatMarcaCard">
                        <input type="number" class="formInput numberCredit" placeholder="Número de tarjeta" />
                    </div>
                    <div class="validateCard">
                        <div class="inputContainer">
                            <img src="./image/dateCredit.svg" alt="dateCredit">
                            <input id="dateCredit" type="text" class="formInput dateCredit" placeholder="mm/aa" type="text" onkeyup="handleExpirationCard(this);" placeholder="mm/aa" maxlength="5" />
                        </div>

                        <div class="inputContainer">
                            <img src="./image/infoCredit.svg" alt="infoCredit">
                            <input type="number" class="formInput cvvCredit" placeholder="CCV" />
                        </div>
                    </div>
                    <div>
                        <div class='term'>
                            <label class="checkbox">
                                <input checked="true" type="checkbox" id="validCheck" />
                                <span class="check"></span>
                            </label>
                            <div style="display: flex; justify-content: space-between; width: 100%; position: relative;">
                                <p>Deseo guardar los datos de mi tarjeta.</p>



                                <div class="tooltip">
                                    <img src="./image/infoCardSave.svg" alt="infoCardSave.svg">
                                    <div class="bottom">
                                        <span>Al seleccionar esta opción se guardan los datos de la tarjeta para
                                            facilitar futuros procesos.
                                            <br><br> Los datos se utilizarán únicamente para los pagos que usted
                                            autorice.</span>
                                        <i></i>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class='term'>
                            <label class="checkbox">
                                <input checked="true" type="checkbox" id="validCheck2" />
                                <span class="check"></span>
                            </label>
                            <p>He leído y acepto los <span>Términos y Condiciones</span></p>
                        </div>

                    </div>
                </form>
            </div>

        </div>
        <div class="btnContainer">
            <button class="btn btn-primary">Realizar pago</button>
            <button class="btn btn-secondary">Cancelar</button>
        </div>
    </div>
    <div id="sending-credentials" class="payment-successful" style="display: none;">
        <div class="logo"><img src="./image/logo.svg" alt="Concasa"></div>
        <div class="container-success-payments">
            <img src="./image/payment-success.svg" alt="payment-success">
            <h1 class="cs-title">¡Se ha realizado el pago exitosamente!</h1>
            <p class="cs-subTitle">Se enviará el recibo a su correo electrónico junto con las indicaciones para continuar el proceso.</p>
            <span class="cs-close">Puede cerrar esta página</span>
            <img src="./image/house-payment.svg" alt="">
        </div>

    </div>

    <div class="modalTerms">
        <h1 class="modalTitle">Términos y condiciones</h1>
        <div class="modalClose"><img src="./image/closeModal.svg" alt="close"></div>
        <div class="informationTerms">
            <p class="text">
                Queda entendido que, de ser aprobada la presente compra por el propietario del inmueble, en las condiciones expuestas según establece en el anexo 1 correspondiente al plan de ventas adjunto a éste documento y que se considera parte integral del mismo,
                se procederá al otorgamiento del documento de opción de compra con los datos que para tal efecto he suministrado al inicio de este documento, los cuales declaro como ciertos y válidos para la elaboración de dicho contrato.
            </p>

            <p class="text">
                Igualmente queda entendido que los gastos de timbres, impuestos de traspaso, honorarios, tramitación y cualesquiera otros que se generen por el otorgamiento de la escritura de compraventa del inmueble(s), serán asumidos única y exclusivamente por el SOLICITANTE.
            </p>

            <p class="text">
                En este acto entrego a
                <span>PROMOTORA CONCASA, S.A.</span>la cantidad de
                <span>15000</span> de como pago de reserva del inmueble. Dicha suma es en calidad de depósito formando parte integral del precio de compra y no serán reembolsables una vez transcurridos 30 días naturales a partir de esta fecha, en cuyo
                caso quedará a favor de <span>PROMOTORA CONCASA, S.A.</span> para resarcir los daños causados por el incumplimiento aquí pautado y cuyos términos y condiciones fueron establecidos en el plan de compra aceptado. Si el retracto de la reserva
                se realiza en el tiempo estipulado, el reembolso se hará efectivo en 30 días después de recibida la notificación por escrito.
            </p>

            <p class="text">
                Se establece como plazo máximo para el otorgamiento del documento de opción de compra respectivo, el término de 30 días naturales, contados a partir de la firma de este documento. En caso de que por mi causa no pudiere concluirse este encargo, ya fuere
                por no concurrir al acto de otorgamiento del documento de opción de compra, por no realizar oportunamente alguno de los pagos que fueran necesarios para ello o por cualquier otra causa imputable a mi persona, se entenderá que renuncio
                automáticamente al encargo que he hecho por este documento y en consecuencia
                <span>PROMOTORA CONCASA, S.A.</span>cédula jurídica 3-101-332655 quedará en plena libertad para aceptar de terceros el mismo encargo que yo he hecho.
            </p>

            <p class="text">
                Conforme con las estipulaciones, acepto los términos y condiciones el día: dd/mm/aaaaa.
            </p>
        </div>
        <div class="btnAccept">
            <button>
                Aceptar
            </button>
        </div>

    </div>
</body>

<script>
    const handleExpirationCard = (ev) => {

        const {
            value
        } = ev
        const expirationCardLabelGroup = document.getElementById('expirationCardLabel');
        const expirationCardLabel = document.getElementById('expirationCardLabel2');
        let dateCredit = document.getElementById("dateCredit");
        let date = new Date().getFullYear()
        let monthAct = new Date().getMonth() + 1
        let anioAct = date.toString().slice(2, 4)
        let valorModif = value
        let anio = valorModif.slice(3, 5)
        let month = valorModif.slice(0, 2)
            //let pleca = valorModif.search("/")

        if (/[a-zA-Z]/g.test(value) == true) {
            dateCredit.value = value.substring(0, value.length - 1)
            return
        }


        //validamos el month
        if (month.length === 2) {
            if (Number(month) > 12 || Number(month) === 0) {
                alert("El mes ingresado no es válido")
                dateCredit.value = ""
                return
            }
        }

        if (value.length === 2) {
            dateCredit.value = value + "/"
        }


        //Validamos el anio
        if (anio.length === 2) {
            if (Number(anio) < Number(anioAct)) {
                alert("El año ingresado no es válido")
                dateCredit.value = value.substring(0, 3);
            }
        }


        // // console.log('pleca ', pleca);
        // if (pleca !== -1 && pleca !== 2) {
        //     //Se valida que la pleca no esta en el formato correcto
        //     alert("El formato no es válido, favor verificar")
        // }


        //Se valida si la tarjeta es del mismo año y si pone un mes menor al actual    
        if (value.length === 5) {
            if (Number(anio) === Number(anioAct)) {
                if (Number(month) < Number(monthAct)) {
                    alert("El mes correspondiente a su tarjeta venció meses anteriores")

                }
            }
        }



        expirationCardLabelGroup.style.color = "#f7f9fc";
        expirationCardLabel.innerText = value;
        expirationCardLabel.style.color = "#FFFFFF";


    }
</script>

</html>